<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!--
  Copyright (C) 2012 Mattia Basaglia.
  All documentation for Knotter is released under the terms of the
  GNU Free Documentation License, version 1.3.
  See fdl.xml or http://www.gnu.org/licenses/gfdl.html
-->
<book xmlns:xi="http://www.w3.org/2001/XInclude"
      version="5.0">
  <info>
    <title>Knotter Manual</title>
    <author>
      <firstname>Mattia</firstname>
      <surname>Basaglia</surname>
      <email>knotter@knotdraw.org</email>
    </author>
    
    <legalnotice><para>Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.3
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
    Texts.  A copy of the license is included in <xref linkend="fdl" />.
    </para></legalnotice>
 
  </info>
  
  <chapter id="user_guide">
    <title>Knotter User Guide</title>

    <section> <title>Introduction</title>
      <para>Knotter is a highly configurable interlace designer.</para>
      <para>Interlace patterns are a kind of design historically used as a
      decorations in many places and by different cultures,
      some examples are Celtic knotworks and Islamic interlaces.</para>
      <para>Knotter uses
        <ulink url="http://en.wikipedia.org/wiki/Knots_and_graphs">graphs to
        represent knots</ulink>.
      </para>
      <para>A good description of the algorithm used to render them and design
        tips can be found at
        <ulink url="http://www.entrelacs.net/">Celtic Knotwork: the Ultimate Tutorial</ulink>
      </para>
      <para>
        Knotter aims to allow its user to design such patterns in an intuitive
        way and to provide easy ways to integrate the result in external
        general-purpose graphic software.
      </para>
      <para>
        For this purpose, designs created within Knotter can be save in a custom
        human-readable format and exported as Scalable Vector Graphics and in a
        wide number of raster image formats.
      </para>
      <informalfigure>
        <mediaobject>
            <imageobject><imagedata fileref="img/quran.jpg"/></imageobject>
            <textobject><phrase>An illumination on the cover of the Quran with an interlaced frame.</phrase></textobject>
        </mediaobject>
        <caption>
          <para>An illumination on the cover of the Quran with an interlaced frame.</para>
        </caption>
      </informalfigure>
    </section>
    
    <section> <title>Command-line interface</title>
      <para>See the <link linkend="man_page">Knotter man page</link></para>
    </section>
        
    <section> <title>Editing</title>
      <para>A knot is produced from a graph where the edges define
      interactions between two knot lines.</para>
  
      <section> <title>Adding nodes</title>
        <para>Double clicking on an empty spot on the drawing area will add a node.
        If you double click on an edge, the new node will split that edge in two.</para>
      </section>
      
      <section> <title>Adding edges</title>
        <para>To toggle edges between nodes, the <xref linkend="nodes_link" />
        and <xref linkend="nodes_unlink" /> commands.</para>
      </section>
      
      <section> <title>Changing edge type</title>
        <para>Knotter supports three types of edge:</para>
        
        <variablelist>
          <varlistentry>
            <term>Default</term>
            <listitem>
              <para>The two lines cross at the edge midpoint, one on top of the other.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Inverted</term>
            <listitem>
              <para>Like default but with the other line on top.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Hole</term>
            <listitem>
              <para>The lines turn back without crossing.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Wall</term>
            <listitem>
              <para>The lines follow the edge without crossing.</para>
            </listitem>
          </varlistentry>
        </variablelist>
        
        <informalfigure>
          <mediaobject>
              <imageobject><imagedata fileref="img/edge_types.png" /></imageobject>
              <textobject><phrase>Screenshot showing the edge types</phrase></textobject>
          </mediaobject>
          <caption>
            <para>From left to right: Default, Inverted, Hole, Wall.</para>
          </caption>
        </informalfigure>

        <tip><para>The type of an edge is changed with the mouse wheel or with the
        edge context menu.</para></tip>
          
      </section><!--Changing edge type-->
            
      <section> <title>Quick graph design</title>
        <para>Adding nodes and edges one at the time can be very tedious,
        Knotter provides the <xref linkend="tools_edge_list" /> tool to make
        this process easier.</para>
        <para>When this is enabled, a single click will create a node and
        each new node is connected to the previous one by an edge.</para>
        <para>To break the edge chain, click with the right button,
        you'll be able to start a new chain from the next node.</para>
      </section>
      
      <section> <title>Selection and transformation</title>
        <para>Only nodes can be selected and moved,
        the edges will follow their vertices.</para>
        <para>A single node is selected by left clicking it,
        multiple nodes can be selected by holding Shift or Control.</para>
        <para>Dragging the mouse from an empty spot will select the nodes within a 
        rectangular area.</para>
        <para>Dragging one of the selected nodes will move the selection, while
        moving nodes can be transformed using the mouse wheel (will scale the
        selection) or Shift + mouse wheel (will rotate the selection around the
        node under the cursor). These transformations are available when pasting
        nodes.</para>
        <para>Selected nodes can be mirrored using <xref linkend="nodes_hflip" />
        and <xref linkend="nodes_vflip" />.</para>
        <para>When several nodes are selected, they can be transformed (rotated
        and translated) by dragging the arrows that appear on the vertices of
        the bounding rectangle.</para>
      </section>
      
      <section> <title>Snapping</title>
        <para>To allow precise designs Knotter offers a grid that, when enabled,
        will snap nodes to the closest point.</para>
    
        <para>There are three types of grid:</para>
        <variablelist>
          <varlistentry>
            <term>Square</term>
            <listitem><para>A regular square grid.</para></listitem>
          </varlistentry>
          <varlistentry>
            <term>Triangular1</term>
            <listitem><para>A grid where the elements are equilateral triangles
            with a horizontal base.</para></listitem>
          </varlistentry>
          <varlistentry>
            <term>Triangular2</term>
            <listitem><para>A grid where the elements are equilateral triangles
            with a vertical side.</para></listitem>
          </varlistentry>
        </variablelist>
        
        <screenshot>
          <mediaobject>
            <textobject><phrase>Screenshot showing some nodes on a grid</phrase></textobject>
            <imageobject><imagedata fileref="img/grid_edit.png" /></imageobject>
            <caption>The grid allows precise editing</caption>
          </mediaobject>
        </screenshot>
              
      </section><!--Snapping-->

    </section><!--Editing-->
    
    <section> <title>Style</title>
      <para>The <action>Knot Style</action> docks allow the
      configuration of display and shape options.</para>
      <variablelist>
        <varlistentry>
          <term>Curve Control Point Distance</term>
          <listitem><para>How much the knot line follows its direction
          when exiting from an edge.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Crossing Gap</term>
          <listitem><para>Distance between the end points when a
          lines are crossing.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Minimum Cusp Angle</term>
          <listitem><para>Minimum angle between two edge to make the knot line 
          display a cuspid rather than a smooth curve.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Cusp Distance</term>
          <listitem><para>Distance between the graph node and cusp tip.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Curve Style</term>
          <listitem><para>Various cuspid shapes.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Point Style</term>
          <listitem>
            <para>How the sharp points are rendered.</para>
            <variablelist>
              <varlistentry>
                <term>Bevel</term>
                <listitem><para>Flat.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term>Miter</term>
                <listitem><para>With a sharp point.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term>Round</term>
                <listitem><para>Smooth.</para></listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>
      </variablelist>
      
      <tip><para>Some style settings can be configured on individual nodes,
      using the context menu (right click on a node) or with the "Selection Style"
      dialog</para></tip>
      
      <informalfigure>
        <mediaobject>
            <imageobject><imagedata fileref="img/cusp_shapes.png" /></imageobject>
            <textobject><phrase>Solomon's knots and trefoils rendered using various styles.</phrase></textobject>
        </mediaobject>
        <caption>
          <para>Solomon's knots and trefoils rendered using various styles.</para>
        </caption>
      </informalfigure>
      
      <screenshot>
        <mediaobject>
            <imageobject><imagedata fileref="img/dialog_knot_style.png" /></imageobject>
            <textobject><phrase>Screenshot of the display style settings</phrase></textobject>
        </mediaobject>
        <mediaobject>
            <imageobject><imagedata fileref="img/dialog_default_style.png" /></imageobject>
            <textobject><phrase>Screenshot of the shape style settings</phrase></textobject>
        </mediaobject>
        <mediaobject>
            <imageobject><imagedata fileref="img/dialog_selection_style.png" /></imageobject>
            <textobject><phrase>Shape settings can be set on the current selection</phrase></textobject>
        </mediaobject>
        <caption>
          <para>Style settings docks.</para>
        </caption>
      </screenshot>
      

      
    </section> <!-- Style -->
    
    <section> <title>Save and Load</title>
      <para>Knotter can save and load knots in its own human-readable format.</para>

      <section> <title>Export</title>
        <para>The Export dialog gives many options to export the knot as Image.</para>
        
        <section id="export_mode"> <title>Mode</title>
          <para>The export mode allows the selection of the rendiring style used
            in the exported image</para>
          <variablelist>
            <varlistentry>
              <term>Normal</term>
              <listitem><para>Use the default rendering, all style options
                are applied to the final result.
              </para></listitem>
            </varlistentry>
            <varlistentry>
              <term>Simplified</term>
              <listitem><para>Export the interlace as a stroke sequence.</para>
                <para>For raster images the only noticeable difference with
                  <option>Normal</option> is that the outline is not visible.</para>
                <para>In vector exports, the result will be a cleaner,
                  un-extruded path that can be customized more easily.</para>
                <para>This is useful if you plan to edit the image with an external program
                  as it will give more control on shape changes.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Loops</term>
              <listitem><para>Has a similar result as <option>Simplified</option>
                But all closed loops are colored differently.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>
    
        <section> <title>Vector</title>
          <para>Exports in the Scalable Vector Graphic format (SVG)</para>
        </section>
        
        <section> <title>Raster</title>
          <variablelist>
            <varlistentry>
              <term><guibutton>Antialias</guibutton></term>
              <listitem><para>If checked, the output image will be supersampled.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term>Compression</term>
              <listitem>
                <para>The compression level, the result depends on the exported format
                  ( 0% will produce large, uncompressed files; 100% small files ).</para>
                <para>When exporting to a JPEG image, heavy compression will
                result in poor quality.</para>
                <para>This option in only meaningful for export format that support compression.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Width/Height</term>
              <listitem><para>The resulting image size, if they are different
              from the actual knot it will be scaled to fit those.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term>Keep Ratio</term>
              <listitem>
                <para>When enabled, editing Width/Height will preserve their ratio.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Reset Size</term>
              <listitem><para>Change Width and Height back to the default.</para></listitem>
            </varlistentry>
          </variablelist>
        </section> <!-- Raster -->
        
        <screenshot>
          <mediaobject>
              <imageobject><imagedata fileref="img/dialog_export.png" /></imageobject>
              <textobject><phrase>Export dialog</phrase></textobject>
          </mediaobject>
          <caption>
            <para>Export dialog.</para>
          </caption>
        </screenshot>
        
      </section> <!--Export-->
      
    </section> <!-- Save & Load -->
      
  </chapter>
  
  <chapter id="man"> <title>Man pages</title>
    <xi:include href="man_page.xml" />
  </chapter>
  
  
  <chapter id="howto"> <title>HowTo</title>
    <para>This section shows how most common operations are performed in Knotter.
    Multiple items represent multiple ways to perform the same task.</para>
    <qandaset>
      <qandadiv> <title>Editing</title>
        <qandaentry>
          <question><para>Insert a node.</para></question>
          <answer><para>When in <emphasis>Edges and nodes</emphasis> mode,
          double click on the canvas.</para></answer> 
          <answer><para>When in <emphasis>Edge list</emphasis> mode,
          left click on the canvas.</para></answer> 
        </qandaentry>
        <qandaentry>
          <question><para>Insert edges.</para></question>
          <answer><para>When in <emphasis>Edges and nodes</emphasis> mode,
          select some nodes and click <xref linkend="nodes_link" />.</para></answer> 
          <answer><para>When in <xref linkend="tools_edge_list" /> mode,
          subsequent nodes are connected automatically with an edge.</para></answer> 
        </qandaentry>
        <qandaentry>
          <question><para>Remove nodes.</para></question>
          <answer><para>Select some nodes and click <xref linkend="nodes_erase" />.</para></answer> 
        </qandaentry>
        <qandaentry>
          <question><para>Remove edges.</para></question>
          <answer><para>Select the edges (or their vertices) and click
            <xref linkend="nodes_unlink" />.</para></answer>
          <answer><para>Bring the edge context menu and click
            <guimenuitem>Remove</guimenuitem>.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Break an edge.</para></question>
          <answer><para>Insert a node when the edge is highlighted.</para></answer>
          <answer><para>Bring the edge context menu and click
            <guimenuitem>Break on intersections</guimenuitem> to add nodes
            where the edge intersects with others.</para></answer>
          <answer><para>Bring the edge context menu and click
            <guimenuitem>Break...</guimenuitem> to break it in even-length pieces.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Insert a regular polygon.</para></question>
          <answer><para>Click on <xref linkend="tools_polygon" /></para></answer> 
        </qandaentry>
        <qandaentry>
          <question><para>Scale part of the graph.</para></question>
          <answer><para>Select some nodes and use the handles when
            <emphasis>Scale</emphasis> mode is active.</para>
            <para>By default, dragging a handle will set the anchor point to the
            opposing handle, if you hold <keycap>Shift</keycap> the anchor point
            will be the bounding box center.
          </para></answer>
          <answer><para>While dragging or pasting a part of the graph, use the
            <mousebutton>mouse wheel</mousebutton>.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Rotate part of the graph.</para></question>
          <answer><para>Select some nodes and use the handles when
            <emphasis>Rotate</emphasis> mode is active.
            Holding <keycap>Ctrl</keycap> will snap the rotation to steps of 15°
          </para></answer>
          <answer><para>While dragging or pasting a part of the graph, use the
            <mousebutton>mouse wheel</mousebutton>.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Flip part of the graph.</para></question>
          <answer><para>Select some nodes and click on <xref linkend="nodes_hflip" />
            or <xref linkend="nodes_vflip" />.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Merge nodes.</para></question>
          <answer><para>Select some nodes and click
          <xref linkend="nodes_merge" />.</para></answer>
        <qandaentry>
          <question><para>Snap to the grid or to a fixed line.</para></question>
          <answer><para>To grid snapping is performed automatically for new
            items when the grid is active.</para></answer>
          <answer><para>Nodes will snap to the grid when are moved
            (if the grid is active)</para></answer>
          <answer><para>Both nodes and edges can be snapped to the grid with
           the context menu.</para></answer>
          <answer><para>Holding <keycap>Ctrl</keycap> in
            <emphasis>Edge list</emphasis> mode, will snap vertices on a line
            with a fixed angle. The angle changes with a step of 15°</para></answer>
        </qandaentry>
        </qandaentry>
      </qandadiv> <!-- Editing -->
      <qandadiv> <title>Style</title>
        <qandaentry>
          <question><para>Change knot style globally.</para></question>
          <answer><para>Use the <emphasis>Knot style</emphasis> settings to change
            overall knot appearance, <emphasis>Default node style</emphasis>
            settings to change style features that can be overridden node-wise
          </para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Change the style for a specific node.</para></question>
          <answer><para>Click on
            <menuchoice>
              <guimenu>Context menu</guimenu>
              <guimenuitem>Preferences...</guimenuitem>
            </menuchoice>
            and the <emphasis>Node style</emphasis> dialog will be shown.
          </para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Change the style for selected nodes.</para></question>
          <answer><para>Use the <emphasis>Selection style</emphasis> dialog.</para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>Remove node specific settings</para></question>
          <answer><para>Click on
            <menuchoice>
              <guimenu>Context menu</guimenu>
              <guimenuitem>Reset custom style</guimenuitem>
            </menuchoice>.
          </para></answer>
          <answer><para>On the <emphasis>Node style</emphasis> dialog, check
            <guibutton>Use default</guibutton>.
          </para></answer>
        </qandaentry>
      </qandadiv> <!-- Style -->
      <qandadiv> <title>Configuration</title>
        <qandaentry>
          <question><para>Configure the grid.</para></question>
          <answer><para>
            To set up grid size and shape click on <xref linkend="view_configure_grid" />
          </para></answer>
          <answer><para>
            To move the grid origin, click on <xref linkend="view_move_grid" />
            and click on the canvas to select the new origin.
          </para></answer>
        </qandaentry>
        <qandaentry>
          <question><para>View only the knot line.</para></question>
          <answer>
            <para>The grid can be toggled with <xref linkend="view_enable_grid" />,
              the graph with <xref linkend="view_graph" />.</para>
            <para>The knot can be still be edited when the graph is disabled as
              the node or edge under the cursor will be displayed.
            </para>
          </answer>
        </qandaentry>
        <qandaentry>
          <question><para>Improve performance</para></question>
          <answer><para>Change settings on the preferences dialog.</para></answer>
          <answer><para>Uncheck <xref linkend="view_knotline" />.</para></answer>
        </qandaentry>
      </qandadiv><!-- Configuration -->
    </qandaset>
  </chapter>
  
  <chapter id="menus"> <title>Menu actions</title>
    <note>
      <para>Most keyboard shortcuts are loaded from the system settings and may
        differ from those listed here.</para>
    </note>
    <section> <title>File Menu</title>
      <variablelist>
        <varlistentry>
          <term id="file_new"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>N</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>New</guimenuitem>
          </menuchoice></term>
          <listitem><para>Open a new tab.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_open"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>O</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Open</guimenuitem>
          </menuchoice></term>
          <listitem><para>Select a file to open.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_open_recent"><menuchoice>
            <guimenu>File</guimenu>
            <guisubmenu>Open recent</guisubmenu>
          </menuchoice></term>
          <listitem><para>Lists recently used files.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_save"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>S</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Save</guimenuitem>
          </menuchoice></term>
          <listitem><para>Save current file.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_save_as"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>S</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Save As..</guimenuitem>
          </menuchoice></term>
          <listitem><para>Save current file, always shows a dialog to select the
            file name.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_save_all"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>Shift</keycap><keycap>S</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Save All</guimenuitem>
          </menuchoice></term>
          <listitem><para>Save all open files.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_export"><menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>Export</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show the export dialog, this allows SVG and raster
          export of the knot.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_print"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>P</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Print</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show the system print dialog.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_page_setup"><menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>Page Setup</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show a dialog that can be used to conifure the paper
          size for printing.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_print_preview"><menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>Print Preview</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show a preview of the printing result with the current settings.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term id="file_quit"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>Q</keycap></keycombo></shortcut>
            <guimenu>File</guimenu>
            <guimenuitem>Quit</guimenuitem>
          </menuchoice></term>
          <listitem><para>Quits Knotter.</para></listitem>
        </varlistentry>
      </variablelist>
    </section><!--File-->
    <section> <title>Edit Menu</title>
      <variablelist>
        
        <varlistentry>
          <term id="edit_undo"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>Z</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Undo</guimenuitem>
          </menuchoice></term>
          <listitem><para>Undo last action.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_redo"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>Shift</keycap><keycap>Z</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Redo</guimenuitem>
          </menuchoice></term>
          <listitem><para>Redo next action.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_copy"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>C</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Copy</guimenuitem>
          </menuchoice></term>
          <listitem><para>Copy selected subgraph, this will copy data for 
            Knotter internals and a SVG image</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_cut"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>X</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Cut</guimenuitem>
          </menuchoice></term>
          <listitem><para>Move selected subgraph to clipboard,
            outgoing edges are removed.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_paste"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>V</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Paste</guimenuitem>
          </menuchoice></term>
          <listitem><para>Paste clipboard contents.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_select_all"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>A</keycap></keycombo></shortcut>
            <guimenu>Edit</guimenu>
            <guimenuitem>Select All</guimenuitem>
          </menuchoice></term>
          <listitem><para>Select all nodes.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="edit_preferences"><menuchoice>
            <guimenu>Edit</guimenu>
            <guimenuitem>Preferences...</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show configuration dialog.</para></listitem>
        </varlistentry>
        
      </variablelist>
    </section><!--Edit-->
    
    <section> <title>View Menu</title>
      <variablelist>
        <varlistentry>
          <term id="view_toolbars"><menuchoice>
            <guimenu>View</guimenu>
            <guisubmenu>Toolbars</guisubmenu>
          </menuchoice></term>
          <listitem><para>Toggle visibility for the available toolbars.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_docks"><menuchoice>
            <guimenu>View</guimenu>
            <guisubmenu>Docks</guisubmenu>
          </menuchoice></term>
          <listitem><para>Toggle visibility for the available dockable dialogs.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_zoom_in"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>+</keycap></keycombo></shortcut>
            <guimenu>View</guimenu>
            <guisubmenu>Zoom</guisubmenu>
            <guimenuitem>Zoom in</guimenuitem>
          </menuchoice></term>
          <listitem><para>Increase the zoom factor in the drawing area.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_zoom_out"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>-</keycap></keycombo></shortcut>
            <guimenu>View</guimenu>
            <guisubmenu>Zoom</guisubmenu>
            <guimenuitem>Zoom out</guimenuitem>
          </menuchoice></term>
          <listitem><para>Decrease the zoom factor in the drawing area.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_zoom_reset"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>0</keycap></keycombo></shortcut>
            <guimenu>View</guimenu>
            <guisubmenu>Zoom</guisubmenu>
            <guimenuitem>Reset Zoom</guimenuitem>
          </menuchoice></term>
          <listitem><para>Reset zoom to 100%.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_reset"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Reset view</guimenuitem>
          </menuchoice></term>
          <listitem><para>Reset zoom to 100% and center on the origin.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_graph"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Show graph</guimenuitem>
          </menuchoice></term>
          <listitem><para>Toggle visibility of the graph.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_knotline"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Show Knotline</guimenuitem>
          </menuchoice></term>
          <listitem><para>Toggle visibility of the interlace.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_rendering_normal"><menuchoice>
            <guimenu>View</guimenu>
            <guisubmenu>Rendering</guisubmenu>
            <guimenuitem>Normal</guimenuitem>
          </menuchoice></term>
          <listitem><para>Use the default rendering, all style options
            are applied, may be slower than the other redering modes.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_rendering_loops"><menuchoice>
            <guimenu>View</guimenu>
            <guisubmenu>Rendering</guisubmenu>
            <guimenuitem>Highlight Loops</guimenuitem>
          </menuchoice></term>
          <listitem><para>Closed loops are detected and colored with different colors.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_rendering_simplified"><menuchoice>
            <guimenu>View</guimenu>
            <guisubmenu>Rendering</guisubmenu>
            <guimenuitem>Simplified</guimenuitem>
          </menuchoice></term>
          <listitem><para>Simple and fast rendering, some style options are discarded.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_enable_grid"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Enable grid</guimenuitem>
          </menuchoice></term>
          <listitem><para>Toggle grid visibility and snapping.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_configure_grid"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Configure grid</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show the grid configuration dialog.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_move_grid"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Move grid</guimenuitem>
          </menuchoice></term>
          <listitem><para>Enable reposition of the grid origin, once this is
          triggered, click on the canvas to set the new origin.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="view_background"><menuchoice>
            <guimenu>View</guimenu>
            <guimenuitem>Background</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show the background configuration dialog.</para></listitem>
        </varlistentry>
        
      </variablelist>
    </section> <!--View-->
    
    <section> <title>Nodes Menu</title>
      <variablelist>
        
        <varlistentry>
          <term id="nodes_link"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>L</keycap></keycombo></shortcut>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Link</guimenuitem>
          </menuchoice></term>
          <listitem><para>Connect selected nodes in a complete subrgraph.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_unlink"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Unlink</guimenuitem>
          </menuchoice></term>
          <listitem><para>Remove all edges connecting the selected nodes.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_erase"><menuchoice>
            <shortcut><keycombo><keycap>Del</keycap></keycombo></shortcut>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Erase</guimenuitem>
          </menuchoice></term>
          <listitem><para>Erase selected nodes.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_merge"><menuchoice>
            <shortcut><keycombo><keycap>Ctrl</keycap><keycap>M</keycap></keycombo></shortcut>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Merge</guimenuitem>
          </menuchoice></term>
          <listitem><para>Merge selected nodes in a single node.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_hflip"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Horizontal flip</guimenuitem>
          </menuchoice></term>
          <listitem><para>Flip nodes horizontally.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_vflip"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Vertical flip</guimenuitem>
          </menuchoice></term>
          <listitem><para>Flip nodes vertically.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_rotate"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Rotate</guimenuitem>
          </menuchoice></term>
          <listitem><para>Dragging on the transformation handles will
          rotate the selection.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_scale"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Scale</guimenuitem>
          </menuchoice></term>
          <listitem><para>Dragging on the transformation handles will
          scale the selection.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="nodes_snap"><menuchoice>
            <guimenu>Nodes</guimenu>
            <guimenuitem>Snap to grid</guimenuitem>
          </menuchoice></term>
          <listitem><para>Snaps the selected nodes to the grid.</para></listitem>
        </varlistentry>
      </variablelist>
    </section> <!--Nodes-->
    
    <section> <title>Tools Menu</title>
      <variablelist>
        
        <varlistentry>
          <term id="tools_edit"><menuchoice>
            <shortcut><keycombo><keycap>Alt</keycap><keycap>Shift</keycap><keycap>E</keycap></keycombo></shortcut>
            <guimenu>Tools</guimenu>
            <guimenuitem>Edit graph</guimenuitem>
          </menuchoice></term>
          <listitem><para>Changes the editing mode, when this is enabled the
           user can interact with every aspect of the graph.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="tools_edge_list"><menuchoice>
            <shortcut><keycombo><keycap>Alt</keycap><keycap>Shift</keycap><keycap>L</keycap></keycombo></shortcut>
            <guimenu>Tools</guimenu>
            <guimenuitem>Edge list</guimenuitem>
          </menuchoice></term>
          <listitem><para>Changes the editing mode, when this is enabled the
           user can insert nodes and edges quickly but other operations are
           somewhat limited</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="tools_polygon"><menuchoice>
            <guimenu>Tools</guimenu>
            <guimenuitem>Insert polygon...</guimenuitem>
          </menuchoice></term>
          <listitem><para>Show a dialog to insert a regular polygon</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="tools_refresh"><menuchoice>
            <shortcut><keycombo><keycap>F5</keycap></keycombo></shortcut>
            <guimenu>Tools</guimenu>
            <guimenuitem>Refresh path</guimenuitem>
          </menuchoice></term>
          <listitem><para>Forces Knotter to redraw the knot if it missed some edit.
          If you need to use this item, you may have encountered a bug.
          See <xref linkend="report_bug" />.</para></listitem>
        </varlistentry>
        
      </variablelist>
    </section> <!--Tools-->
    
    <section> <title>Help Menu</title>
      <variablelist>
        
        <varlistentry>
          <term id="help_manual"><menuchoice>
            <shortcut><keycombo><keycap>F1</keycap></keycombo></shortcut>
            <guimenu>Help</guimenu>
            <guimenuitem>Manual</guimenuitem>
          </menuchoice></term>
          <listitem><para>Shows a window with the displaying the HTML
            version of this manual.</para></listitem>
        </varlistentry>
        
        <varlistentry>
          <term id="help_about"><menuchoice>
            <guimenu>Help</guimenu>
            <guimenuitem>About...</guimenuitem>
          </menuchoice></term>
          <listitem><para>Shows a dialog with information on Knotter version and
          build environment.</para></listitem>
        </varlistentry>
        
      </variablelist>
    </section> <!--Tools-->
    
    
  </chapter><!-- Menu -->
  
  <chapter id="dialogs"> <title>Dialogs</title>
    <warning>
      <title>To Do</title>
      <para>This section has not been written yet.</para>
    </warning>
  </chapter>
  
  <chapter id="knotfile"> <title>Knotter file format</title>
    <warning>
      <title>To Do</title>
      <para>This section has not been written yet.</para>
    </warning>
  </chapter>
  
  
  
  <chapter id="build"> <title>Building and installing</title>
    <para>This chapter describes how to build and install Knotter from source and
      the official packages, see <xref linkend="obtaining_knotter" /> for links
      and instructions on how to get the packages.
    </para>
    
    <section> <title>Requirements and dependencies</title>
      <para>Knotter is written in C++ using the Qt framework, installing
        the Qt SDK will satisfy most requirements.</para>
      <itemizedlist>
        <listitem><para>C++ build environment (Compiler, make etc.)</para></listitem>
        <listitem>
          <para>Qt libraries and development tools</para>
          <para>Knotter has been tested with Qt versions 4.7 and 4.8</para>
          <para><ulink url="http://qt-project.org/">Qt Developer Network</ulink></para>
        </listitem>
        <listitem>
          <para>Boost program-options (optional)</para>
          <para><ulink url="http://www.boost.org/">Boost homepage</ulink></para>
        </listitem>
      </itemizedlist>
      
    </section>
    
    <section> <title>Compiling from a bourne shell</title>
      <para>This section describes the scripts that can be called to build
      Knotter from a bourne-compatible shell like <command>bash</command> or
      <command>dash</command>. This is the recommended way to build Knotter.</para>
      <para>Building from a shell takes two steps, configuration and actual building.</para>
      <para>The configuration is done via <command>configure.sh</command>, see
        <command>configure.sh --help</command> for a list of options.</para>
      <para><command>configure.sh</command> generates a Makefile that can be
        used to build the program.</para>
      <para>Building with automatic configuration is done as follows:</para>
<programlisting>
./configure.sh
make
</programlisting>
      <para>If you want to install the Knotter, after the commands described above, run</para>
<programlisting>
make install
</programlisting>
      <para>This will install the files in prefix, as set from <command>configure.sh</command>.
      You can move the entire install tree to a specific directory by setting the
      environment variable <envar>INSTALL_ROOT</envar></para>.
    </section>
    
    <section> <title>Compiling from Qt creator</title>
      <warning>
        <para>It is strongly recommended that you compile from a shell if it
        is available on your system.</para>
      </warning>
      <para>The project file is <filename>knotter.pro</filename>,
      you should be able to build it from Qt Creator.</para>
      <!-- todo variables (?)-->
    </section>
    
    <section> <title>Deb and packages</title>
      <para>Binary deb and rpm packages can be used to install Knotter
      using the system installer on systems that support these package managers.
      </para>
    </section>
    
  </chapter> <!-- Building and installing -->
  
  <chapter id="contacts"> <title>Contacts and links</title>
    <section id="obtaining_knotter"> <title>Obtaining Knotter</title>
      <para>Source packages and some compiled binaries can be found at
        <ulink url="http://sourceforge.net/projects/knotter/files/">http://sourceforge.net/projects/knotter/files/</ulink>,
        The latest sources can be obtained with git at
        <uri>git://git.code.sf.net/p/knotter/code</uri> (
        <ulink url="http://sourceforge.net/p/knotter/code">Online repository browser</ulink> ).
      </para>
    </section>
    <section> <title id="report_bug">Reporting Bugs</title>
      <para>To send bug reports, feature request and feedback you can use the
      <ulink url="https://sourceforge.net/p/knotter/discussion/">forum on SourceForge</ulink>
      or send me an email: <personname>Mattia Basaglia</personname>
      <email>knotter@knotdraw.org</email>
      </para>
    </section>
    <section> <title>All contacts</title>
      <para>Follows a list of places from which you can get more information or
      contact the maintainer</para>
      <itemizedlist>
        <listitem><para>
          <ulink url="http://www.knotdraw.org/">Knotter website (knotdraw.org)</ulink>
        </para></listitem>
        <listitem><para>
          <ulink url="https://sourceforge.net/projects/knotter/">SourceForce
          project summary</ulink>
        </para></listitem>
        <listitem><para>
          <ulink url="http://www.knotdraw.org/forum/">Forum</ulink></para>
        </listitem>
        <listitem>
          <para>
            <personname>Mattia Basaglia</personname>
            <email>knotter@knotdraw.org</email>
            (Project maintainer)
          </para>
        </listitem>
        <listitem><para>
          <ulink url="https://twitter.com/FreeKnotter">Twitter account</ulink>
        </para></listitem>
      </itemizedlist>
    </section>
  </chapter>
  
  <chapter id="license"> <title>License</title>
    <para>Knotter is released under the terms of the
      <link linkend="gpl">GNU General Public License, Version 3</link> or any
      later version, as published by the Free Software Foundation.</para>
    <para>The Tango icons are on the public domain.
    This applies to all the files under <uri>themes/tango-icons</uri> directory in the
    source tree, including custom icons.</para>
    <para>Icons in the <uri>img</uri> subdirectory are covered by the
    GLPv3 as the whole source</para>
    <para>This documentation is released under the
    <link linkend="fdl">GNU Free Documentation License, Version 1.3</link>.
    </para>
    
    <tip> <title>Freedom</title>
      <para>In a nutshell, the you have the following freedoms:</para>
      <itemizedlist>
        <listitem>The freedom to run Knotter for any purpose.</listitem>
        <listitem>The freedom to study how Knotter works,
            and change it to make it do what you wish.
        </listitem>
        <listitem>The freedom to redistribute copies so you can help your neighbor.</listitem>
        <listitem>The freedom to distribute copies of your modified versions to others .</listitem>
      </itemizedlist>
    </tip>
    
    <xi:include href="gpl.xml"/>
    <xi:include href="fdl.xml"/>
  </chapter>
  
</book>
